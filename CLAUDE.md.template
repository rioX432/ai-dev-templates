# {PROJECT_NAME}

## Project Overview
<!-- Brief description of the project -->

## Behavior Rules

<rules>
### No Guessing
- **Do not make assumptions.** Verify API specs, library behavior, and OS constraints before implementation
- When uncertain, use web search, official docs, or Codex MCP (`mcp__codex__codex`) to confirm
- Code based on guesses will always have bugs

### Verify Before Implementing
- Check implementation details and design decisions with **Codex MCP** before starting
- Mandatory for:
  - New architecture patterns
  - Design decisions not specified in docs
  - Platform-specific API usage
  - Library selection and version decisions

### Think Twice
- After writing code, **re-read and verify it's correct**
- Check:
  - Requirements are met
  - CLAUDE.md rules are followed
  - Edge cases covered (empty data, null, offline)
  - Consistent with existing patterns
</rules>

## Architecture
<!-- Define project structure -->

```
src/
  ...
```

## Tech Stack

| Layer | Technology |
|---|---|
| ... | ... |

## Detailed Guides (External Files)

<!-- Split detailed docs into separate files to keep CLAUDE.md concise -->

| File | Contents |
|---|---|
| `docs/claude/coding-conventions.md` | Coding conventions (Kotlin / Swift / general) |
| `docs/claude/design-decisions.md` | Design decisions and guidelines |
| `docs/claude/review_points.md` | Review insights extracted from past reviews (reference during dev) |

## Coding Conventions

- Code comments in English
- Commit messages in English, concise single line
- No magic numbers — define as constants
- Error messages: user-facing in target language, logs in English

## AI-Driven Development

### Development Flow (Issue-Driven)

**All work is driven by GitHub Issues.** Pick the lowest-numbered unblocked issue and work through it.

1. `gh issue list` to find unstarted issues
2. Read the issue, understand requirements, plan implementation
3. Confirm design/plan with **Codex MCP** before starting
4. Implement according to plan
5. Verify build and lint pass
6. Run `/review` for self-review
7. Fix any review findings; extract reusable insights into `docs/claude/review_points.md`
8. Create PR (`Closes #N` in body)

### review_points.md Workflow
- Don't copy review comments verbatim — **extract reusable prevention insights**
- Reference `review_points.md` during design and implementation to avoid repeat mistakes

### Automated Operations (post-release)

| Pipeline | Method | Frequency |
|---|---|---|
| Crash monitoring | Firebase Crashlytics → Claude analysis → auto-fix PR or Issue | Real-time |
| User feedback | App Store / Google Play reviews → sentiment analysis → Issue | Daily |
| In-app feedback | Feedback form → GitHub Issues API | On submission |
| Metrics | Store API data collection → trend analysis → report | Daily |

### Feature Prioritization: 2-Axis Evaluation

Next features are decided by **two axes: "User Requests" and "Metrics"**. No features based on gut feeling.

**Axis 1: User Requests (Qualitative)**
- Request volume (vote count from feedback, reviews, social)
- Sentiment intensity (star rating, emotional analysis)
- User segment (free/paid, engagement level)

**Axis 2: Metrics (Quantitative)**
- Retention rate (D1/D7/D30)
- Feature usage rate
- Conversion rate (free → paid)
- Crash-free rate
- Task completion rate

**Rule:** Features where both axes don't align are not implemented. Exception: crash/security fixes act on metrics alone.

### Agent Teams (Parallel Development)

Use Claude Code Agent Teams for parallel development when tasks are independent:

| Teammate | Scope | File Access |
|---|---|---|
| {Team 1} | {scope} | {directories} |
| {Team 2} | {scope} | {directories} |
| {Team 3} | {scope} | {directories} |

- **No file conflicts**: each teammate edits only their assigned directories
- Shared API changes require Lead coordination

## Testing

| Layer | Tool | Coverage Target |
|---|---|---|
| ... | ... | ... |

## Common Mistakes (Don't Do)

- ...
